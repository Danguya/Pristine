!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):r.Pristine=e()}(this,function(){"use strict";function r(r,e){for(;(r=r.parentElement)&&!r.classList.contains(e););return r}function e(r){var e=arguments;return this.replace(/\${([^{}]*)}/g,function(r,t){return e[t]})}function t(t,n,f){function c(e){var t=r(e.input,m.config.classTo);t&&t.classList.remove(m.config.errorClass,m.config.successClass);var n=r(e.input,m.config.errorTextParent),i=n?n.querySelector("."+s):null;return i&&i.parentNode.removeChild(i),[t,n]}function p(r,e,t,n){var i=u[t];if(i&&(r.push(i),n)){var s=n.split(",");s.unshift(null),e[t]=s}}var m=this;return function(r,e,t){m.form=r,m.config=e||i,m.online=!(!1===t),m.fields=Array.from(r.querySelectorAll(a)).map(function(r){var e=[],t={};return o.forEach(function(n){var i=r.getAttribute(n);null!==i&&p(e,t,n,i)}),[].forEach.call(r.attributes,function(r){if(/^data-pristine-/.test(r.name)){var n=r.name.substr(14);"type"===n&&(n=r.value),p(e,t,n,r.value)}}),p(e,t,r.getAttribute("type")),e.sort(function(r,e){return e.priority-r.priority}),m.online&&r.addEventListener(~["radio","checkbox"].indexOf(r.getAttribute("type"))?"change":"input",function(r){m.validate(r.target)}.bind(m)),r.pristine={input:r,validators:e,params:t},r.pristine}.bind(m))}(t,n,f),m.validate=function(r,t){t=r&&!0===t||!0===r;var n=m.fields;!0!==r&&!1!==r&&(r instanceof HTMLElement?n=[r.pristine]:(r instanceof NodeList||r instanceof(window.$||Array)||r instanceof Array)&&(n=Array.from(r).map(function(r){return r.pristine})));var i=!0;for(var a in n){var o=n[a];!function(r){var t=[],n=!0;for(var i in r.validators){var s=r.validators[i],a=r.params[s.name]?r.params[s.name]:[];if(a[0]=r.input.value,!s.fn.apply(r.input,a)&&(n=!1,t.push(e.apply(s.msg,a)),!0===s.halt))break}return r.messages=t,n}(o)?(i=!1,!t&&function(r,e){var t=c(r),n=t[0],i=t[1];n&&n.classList.add(m.config.errorClass);var a=document.createElement(m.config.errorTextTag);a.className=s+" "+m.config.errorTextClass,a.innerHTML=e.join("<br/>"),i&&i.appendChild(a)}(o,o.messages)):!t&&function(r){var e=c(r)[0];e&&e.classList.add(m.config.successClass)}(o)}return i},m.getErrorMessages=function(r){return r.length?r[0].pristine.messages:r.pristine.messages},m.addValidator=function(r,e,t,n,i){"string"==typeof r?l(r,{fn:e,msg:t,priority:n,halt:i}):r instanceof HTMLElement&&(r.pristine.validators.push({fn:e,msg:t,priority:n,halt:i}),r.pristine.validators.sort(function(r,e){return e.priority-r.priority}))},m.reset=function(){Array.from(m.form.querySelectorAll("."+s)).map(function(r){r.parentNode.removeChild(r)}),Array.from(m.form.querySelectorAll("."+m.config.classTo)).map(function(r){r.classList.remove(m.config.successClass,m.config.errorClass)})},m.destroy=function(){m.reset(),m.fields.forEach(function(r){delete r.input.pristine}),m.fields=[]},m.setGlobalConfig=function(r){i=r},m}var n={required:"This field is required",email:"This field requires a valid e-mail address",number:"This field requires a number",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}"},i={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},s="pristine-error",a="input:not([type^=hidden]):not([type^=submit]), select, textarea",o=["required","min","max","minlength","maxlength"],u={},l=function(r,e){e.name=r,e.msg||(e.msg=n[r]),void 0===e.priority&&(e.priority=1),u[r]=e};return l("text",{fn:function(r){return!0},priority:0}),l("required",{fn:function(r){return""!==r},priority:99,halt:!0}),l("email",{fn:function(r){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)},priority:1}),l("number",{fn:function(r){return parseFloat(r)},priority:1}),l("minlength",{fn:function(r,e){return console.log(r,e)||r&&r.length>=parseInt(e)},priority:1}),l("maxlength",{fn:function(r,e){return r&&r.length<=parseInt(e)},priority:1}),l("min",{fn:function(r,e){return parseFloat(r)>=parseFloat(e)},priority:1}),l("max",{fn:function(r,e){return parseFloat(r)<=parseFloat(e)},priority:1}),t});
