!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).Pristine=r()}(this,(function(){"use strict";var e={en:{required:"This field is required",email:"This field requires a valid e-mail address",number:"This field requires a number",integer:"This field requires an integer value",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}",pattern:"Please match the requested format",equals:"The two fields do not match"}};function r(e){var r=arguments;return this.replace(/\${([^{}]*)}/g,(function(e,t){return r[t]}))}function t(e){return e.pristine.self.form.querySelectorAll('input[name="'+e.getAttribute("name")+'"]:checked').length}var n={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},i=["required","min","max","minlength","maxlength","pattern"],s=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,a=/-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/,o="en",l={},u=function(r,t){t.name=r,t.msg||(t.msg={en:e.en[r]}),void 0===t.priority&&(t.priority=1),l[r]=t};function f(e,t,s){var u=this;function f(e,r,t,n){var i=l[t];if(i&&(e.push(i),n)){var s="pattern"===t?[n]:n.split(",");s.unshift(null),r[t]=s}}function c(e){for(var t,n=[],i=!0,s=0;e.validators[s];s++){var a=e.validators[s],l=e.params[a.name]?e.params[a.name]:[];if(l[0]=e.input.value,!a.fn.apply(e.input,l)&&(i=!1,(t=a.msg)&&t.constructor&&t.call&&t.apply?n.push(a.msg(e.input.value,l)):e.messages[o]&&e.messages[o][a.name]?n.push(r.apply(e.messages[o][a.name],l)):n.push(r.apply(a.msg[o],l)),!0===a.halt))break}return e.errors=n,i}function p(e){if(e.errorElements)return e.errorElements;var r=function(e,r){for(;(e=e.parentElement)&&!e.classList.contains(r););return e}(e.input,u.config.classTo),t=null,n=null;return(t=u.config.classTo===u.config.errorTextParent?r:r.querySelector("."+u.config.errorTextParent))&&((n=t.querySelector(".pristine-error"))||((n=document.createElement(u.config.errorTextTag)).className="pristine-error "+u.config.errorTextClass,t.appendChild(n),n.pristineDisplay=n.style.display)),e.errorElements=[r,n]}function m(e){var r=p(e),t=r[0],n=r[1];t&&(t.classList.remove(u.config.successClass),t.classList.add(u.config.errorClass)),n&&(n.innerHTML=e.errors.join("<br/>"),n.style.display=n.pristineDisplay||"")}function d(e){var r=function(e){var r=p(e),t=r[0],n=r[1];return t&&(t.classList.remove(u.config.errorClass),t.classList.remove(u.config.successClass)),n&&(n.innerHTML="",n.style.display="none"),r}(e)[0];r&&r.classList.add(u.config.successClass)}return function(e,r,t){e.setAttribute("novalidate","true"),u.form=e,u.config=function(e,r){for(var t in r)t in e||(e[t]=r[t]);return e}(r||{},n),u.live=!(!1===t),u.fields=Array.from(e.querySelectorAll("input:not([type^=hidden]):not([type^=submit]), select, textarea")).map(function(e){var r=[],t={},n={};return[].forEach.call(e.attributes,(function(e){if(/^data-pristine-/.test(e.name)){var s=e.name.substr(14),o=s.match(a);if(null!==o){var l=void 0===o[1]?"en":o[0];return void(n[l][s.slice(0,o.length)]=e.value)}"type"===s&&(s=e.value),f(r,t,s,e.value)}else~i.indexOf(e.name)?f(r,t,e.name,e.value):"type"===e.name&&f(r,t,e.value)})),r.sort((function(e,r){return r.priority-e.priority})),u.live&&e.addEventListener(~["radio","checkbox"].indexOf(e.getAttribute("type"))?"change":"input",function(e){u.validate(e.target)}.bind(u)),e.pristine={input:e,validators:r,params:t,messages:n,self:u}}.bind(u))}(e,t,s),u.validate=function(e,r){r=e&&!0===r||!0===e;var t=u.fields;!0!==e&&!1!==e&&(e instanceof HTMLElement?t=[e.pristine]:(e instanceof NodeList||e instanceof(window.$||Array)||e instanceof Array)&&(t=Array.from(e).map((function(e){return e.pristine}))));for(var n=!0,i=0;t[i];i++){var s=t[i];c(s)?!r&&d(s):(n=!1,!r&&m(s))}return n},u.getErrors=function(e){if(!e){for(var r=[],t=0;t<u.fields.length;t++){var n=u.fields[t];n.errors.length&&r.push({input:n.input,errors:n.errors})}return r}return e.tagName&&"select"===e.tagName.toLowerCase()?e.pristine.errors:e.length?e[0].pristine.errors:e.pristine.errors},u.addValidator=function(e,r,t,n,i){e instanceof HTMLElement?(e.pristine.validators.push({fn:r,msg:t,priority:n,halt:i}),e.pristine.validators.sort((function(e,r){return r.priority-e.priority}))):console.warn("The parameter elem must be a dom element")},u.addError=function(e,r){(e=e.length?e[0]:e).pristine.errors.push(r),m(e.pristine)},u.reset=function(){for(var e=0;u.fields[e];e++)u.fields[e].errorElements=null;Array.from(u.form.querySelectorAll(".pristine-error")).map((function(e){e.parentNode.removeChild(e)})),Array.from(u.form.querySelectorAll("."+u.config.classTo)).map((function(e){e.classList.remove(u.config.successClass),e.classList.remove(u.config.errorClass)}))},u.destroy=function(){u.reset(),u.fields.forEach((function(e){delete e.input.pristine})),u.fields=[]},u.setGlobalConfig=function(e){n=e},u}return u("text",{fn:function(e){return!0},priority:0}),u("required",{fn:function(e){return"radio"===this.type||"checkbox"===this.type?t(this):void 0!==e&&""!==e},priority:99,halt:!0}),u("email",{fn:function(e){return!e||s.test(e)}}),u("number",{fn:function(e){return!e||!isNaN(parseFloat(e))},priority:2}),u("integer",{fn:function(e){return!e||/^\d+$/.test(e)}}),u("minlength",{fn:function(e,r){return!e||e.length>=parseInt(r)}}),u("maxlength",{fn:function(e,r){return!e||e.length<=parseInt(r)}}),u("min",{fn:function(e,r){return!e||("checkbox"===this.type?t(this)>=parseInt(r):parseFloat(e)>=parseFloat(r))}}),u("max",{fn:function(e,r){return!e||("checkbox"===this.type?t(this)<=parseInt(r):parseFloat(e)<=parseFloat(r))}}),u("pattern",{fn:function(e,r){var t=r.match(new RegExp("^/(.*?)/([gimy]*)$"));return!e||new RegExp(t[1],t[2]).test(e)}}),u("equals",{fn:function(e,r){var t=document.querySelector(r);return t&&(!e&&!t.value||t.value===e)}}),f.addValidator=function(e,r,t,n,i){u(e,{fn:r,msg:t,priority:n,halt:i})},f.addMessages=function(r,t){var n=e.hasOwnProperty(r)?e[r]:e[r]={};Object.keys(t).forEach((function(e,r){n[e]=t[e]}))},f.setLocale=function(r){o=r,Object.keys(l).forEach((function(t,n){l[t].msg[r]=e[r][t]}))},f}));
